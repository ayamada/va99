VA=(()=>{var e=new (self.AudioContext||self.webkitAudioContext),m=e.createGain(),q=e.createDynamicsCompressor(),x=m.gain.value=.2,C=new (self.OfflineAudioContext||self.webkitOfflineAudioContext)(2,2,e.sampleRate),r=a=>{try{a.stop()}catch(b){}try{a.disconnect()}catch(b){}try{a.buffer=null}catch(b){}},D=a=>{var b=e.createBufferSource();b.buffer=a;b.addEventListener("ended",()=>{r(b)},{once:!0});a=e.createStereoPanner?.();var c=e.createGain();(a?b.connect(a):b).connect(c).connect(m);b.G=c;b.P=a;return b},
p=[],t=(a,b=0,c=0)=>{if("suspended"==e.state)try{e.resume()}catch(d){}if(a instanceof AudioBuffer){var h=D(a);if(!c){for(c=p.length-1;0<=c;c--){var [l,k]=p[c];l===a&&(k.G.gain.value/=2);k.buffer||p.splice(c,1)}p.push([a,h])}b||h.start();return h}},f={},u=0,v=()=>{var a=f.h;a&&r(a);a=f.i;f={};if(a){var [,b,c,h,l,k]=a,d=t(b,1,1);if(d){d.loop=!c;d.G.gain.value=h;d.playbackRate.value=l;var g=d.P?.pan;g&&(g.value=k);f.j=a;f.h=d;d.start()}else v()}},w=(a,b=0,c=1,h=1,l=1,k=0,d)=>{d??=a;var g=f.h,n=f.j;if(!g?.buffer||
f.g||d!==n[0]||b!=n[2]||l!=n[3]||h!=n[4]||k!=n[5])if(u++,null==a||a instanceof AudioBuffer){if(f.i=a?[d,a,b,l,h,k]:null,!f.g){if(!g?.buffer||!g.G||!c)return v();f.g=!0;var y=99*c,E=g.G.gain.value/9,z=()=>0>=(g.G.gain.value-=E)||!g.buffer?v():setTimeout(z,y);setTimeout(z,y)}}else{w(...[,,c]);var F=u;A.L(a).then(B=>B&&F==u&&w(B,b,c,h,l,k,d))}};q.release.value=.01;m.connect(q).connect(e.destination);["click","touchstart","touchend"].forEach(a=>document.addEventListener(a,()=>t(e.createBuffer(1,2,e.sampleRate),
0,1),{once:!0}));var A={L:async a=>{var b=await fetch(a);if(!b.ok)throw Error(a);a=await b.arrayBuffer();return await C.decodeAudioData(a)},P:t,BGM:w,D:r,get V(){return x},set V(a){x=a;m&&(m.gain.value=a)},get A(){return e},get C(){return q},VER:"va99-4.1.20230801"};return A})();
//# sourceMappingURL=va99.min.js.map
