export let VA=(()=>{var e=new (self.AudioContext||self.webkitAudioContext),l=e.createGain(),x=l.gain.value=.2,q,y=a=>{q?(l.disconnect(),q.disconnect()):l.disconnect();(q=a)?l.connect(a).connect(e.destination):l.connect(e.destination)},D=new (self.OfflineAudioContext||self.webkitOfflineAudioContext)(2,2,e.sampleRate),r=a=>{try{a.stop()}catch(b){}try{a.disconnect()}catch(b){}try{a.buffer=null}catch(b){}},E=a=>{var b=e.createBufferSource();b.buffer=a;b.addEventListener("ended",()=>{r(b)},{once:!0});a=e.createStereoPanner?.();
var c=e.createGain();(a?b.connect(a):b).connect(c).connect(l);b.G=c;b.P=a;return b},p=[],t=(a,b=0,c=0)=>{if("suspended"==e.state)try{e.resume()}catch(d){}if(a instanceof AudioBuffer){var h=E(a);if(!c){for(c=p.length-1;0<=c;c--){var [m,k]=p[c];m===a&&(k.G.gain.value/=2);k.buffer||p.splice(c,1)}p.push([a,h])}b||h.start();return h}},f={},u=0,v=()=>{var a=f.h;a&&r(a);a=f.i;f={};if(a){var [,b,c,h,m,k]=a,d=t(b,1,1);if(d){d.loop=!c;d.G.gain.value=h;d.playbackRate.value=m;var g=d.P?.pan;g&&(g.value=k);f.j=
a;f.h=d;d.start()}else v()}},w=(a,b=0,c=1,h=1,m=1,k=0,d=!1)=>{d||=a;var g=f.h,n=f.j;if(!g?.buffer||f.g||d!==n[0]||b!=n[2]||m!=n[3]||h!=n[4]||k!=n[5])if(u++,null==a||a instanceof AudioBuffer){if(f.i=a?[d,a,b,m,h,k]:null,!f.g){if(!g?.buffer||!g.G||!c)return v();f.g=!0;var z=99*c,F=g.G.gain.value/9,A=()=>0>=(g.G.gain.value-=F)||!g.buffer?v():setTimeout(A,z);setTimeout(A,z)}}else{w(...[,,c]);var G=u;B.L(a).then(C=>C&&G==u&&w(C,b,c,h,m,k,d))}};y();["click","touchstart","touchend"].forEach(a=>document.addEventListener(a,
()=>t(e.createBuffer(1,2,e.sampleRate),0,1),{once:!0}));var B={L:async a=>{var b=await fetch(a);if(!b.ok)throw Error(a);a=await b.arrayBuffer();return await D.decodeAudioData(a)},P:t,BGM:w,D:r,l:y,get V(){return x},set V(a){x=a;l&&(l.gain.value=a)},get A(){return e},VER:"va99-4.1.20230925"};return B})();
//# sourceMappingURL=va99.min.mjs.map
