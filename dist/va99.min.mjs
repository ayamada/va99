export let VA=(()=>{var d=new (self.AudioContext||self.webkitAudioContext),h=d.createGain(),C=h.gain.value=.2,u,D=a=>{u?(h.disconnect(),u.disconnect()):h.disconnect();(u=a)?h.connect(a).connect(d.destination):h.connect(d.destination)},K=new (self.OfflineAudioContext||self.webkitOfflineAudioContext)(2,2,d.sampleRate),n=a=>{try{a.stop()}catch(b){}try{a.disconnect()}catch(b){}try{a.buffer=null}catch(b){}},L=a=>{var b=d.createBufferSource();b.buffer=a;b.addEventListener("ended",()=>{n(b)},{once:!0});a=d.createStereoPanner?.();
var c=d.createGain();(a?b.connect(a):b).connect(c).connect(h);b.G=c;b.P=a;return b},p=[],r=(a,b,c)=>{if(d.state=="suspended"||d.state=="interrupted")try{d.resume()}catch(q){}if(a instanceof AudioBuffer){var f=L(a);if(!c){for(c=p.length-1;0<=c;c--){var k,g;[k,g]=p[c];if(k===a||d.state=="suspended")g.G.gain.value/=2;g.buffer||p.splice(c,1)}p.push([a,f])}b||f.start();b||d.state!="suspended"||setTimeout(()=>d.state=="suspended"&&n(f),999);return f}},e={},v=0,w=()=>{var a=e.i;a&&n(a);a=e.g;e={};if(a){var b,
c,f,k,g;[b,c,,f,k,g]=a;if(b=r(b,1,1)){b.loop=!c;b.G.gain.value=k;b.playbackRate.value=f;if(c=b.P?.pan)c.value=g;e.j=a;e.i=b;b.start()}else w()}},M=(a,b)=>a.length==b.length&&a.every((c,f)=>c===b[f]),t=[],N=a=>t.find(([b])=>a===b)?.[1],y=(a,b=0,c=1,f=1,k=1,g=0)=>{if(a!=null&&!(a instanceof AudioBuffer)){var q=N(a);q&&(a=q)}var E=[a,b,c,f,k,g],l=e.i,x=e.j,F=l?.buffer&&!e.h&&x,m=[];a==null&&(e.g?m=[...e.g]:F&&(m=[...x]));if(F&&M(E,x))return m;v++;if(a!=null&&!(a instanceof AudioBuffer)){y(null,!1,c);
var O=v;z.L(a).then(A=>{var B;if(B=A)q||(t.unshift([a,A]),t.length=Math.min(t.length,z.BCL)),B=O==v&&y(A,b,c,f,k,g);return B});return m}e.g=a?E:null;if(e.h)return m;if(!l?.buffer||!l.G||!c)return w(),m;e.h=!0;var G=c*99,P=l.G.gain.value/9,H=()=>(l.G.gain.value-=P)<=0||!l.buffer?w():setTimeout(H,G);setTimeout(H,G);return m};D(0);var I=d.createBuffer(1,2,d.sampleRate),J=()=>{r(I,0,1);document.removeEventListener("click",J)};document.addEventListener("click",J);["touchstart","touchend"].forEach(a=>document.addEventListener(a,
()=>r(I,0,1)));var z={L:async a=>{var b=await fetch(a);if(!b.ok)throw Error(a);a=await b.arrayBuffer();return await K.decodeAudioData(a)},P:a=>r(a,0,0),BGM:y,D:n,I:D,get V(){return C},set V(a){C=a;h&&(h.gain.value=a)},get A(){return d},VER:"va99-5.6.20250929",BCL:2};return z})();
//# sourceMappingURL=va99.min.mjs.map
