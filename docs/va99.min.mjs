export let VA=(()=>{var e=new (self.AudioContext||self.webkitAudioContext),m=e.createGain(),w=e.createDynamicsCompressor(),t=m.gain.value=.3,x=new (self.OfflineAudioContext||self.webkitOfflineAudioContext)(2,2,e.sampleRate),p=a=>{try{a.stop()}catch(b){}try{a.disconnect()}catch(b){}try{a.buffer=null}catch(b){}},y=a=>{var b=e.createBufferSource();b.buffer=a;b.addEventListener("ended",()=>{p(b)},{once:!0});a=e.createStereoPanner?.();var d=e.createGain();(a?b.connect(a):b).connect(d).connect(m);b.G=d;b.P=a;return b},
n=[],q=(a,b=0,d=0)=>{if("suspended"==e.state)try{e.resume()}catch(c){}if(a instanceof AudioBuffer){var g=y(a);if(!d){for(d=n.length-1;0<=d;d--){var [l,h]=n[d];l===a&&(h.G.gain.value/=2);h.buffer||n.splice(d,1)}n.push([a,g])}b||g.start();return g}},f={},r=()=>{var a=f.h;a&&p(a);a=f.i;f={};if(a){var [b,d,g,l,h]=a,c=q(b,1,1);if(c){c.loop=!d;c.G.gain.value=g;c.playbackRate.value=l;var k=c.P?.pan;k&&(k.value=h);f.j=a;f.h=c;c.start()}else r()}};m.connect(w).connect(e.destination);["click","touchstart",
"touchend"].forEach(a=>document.addEventListener(a,()=>q(e.createBuffer(1,2,e.sampleRate),0,1),{once:!0,capture:!0}));return{L:async a=>{var b=await fetch(a);if(!b.ok)throw Error(a);a=await b.arrayBuffer();return await x.decodeAudioData(a)},P:q,BGM:(a,b=0,d=1,g=1,l=1,h=0)=>{var c=f.h,k=f.j;if(!c?.buffer||f.g||a!==k[0]||b!=k[1]||l!=k[2]||g!=k[3]||h!=k[4])if(f.i=a?[a,b,l,g,h]:null,!f.g){if(!c?.buffer||!c.G||!d)return r();f.g=!0;var u=99*d,z=c.G.gain.value/9,v=()=>0>=(c.G.gain.value-=z)||!c.buffer?r():
setTimeout(v,u);setTimeout(v,u)}},D:p,get V(){return t},set V(a){t=a;m&&(m.gain.value=a)},get A(){return e},VER:"2.0.20230727"}})();
//# sourceMappingURL=va99.min.mjs.map
