export let VA=(()=>{var e,n=()=>{e||=new (self.AudioContext||self.webkitAudioContext);if("suspended"==e.state)try{e.resume()}catch(a){}},q=a=>{try{a.stop()}catch(b){}try{a.disconnect()}catch(b){}try{a.buffer=null}catch(b){}},r=.3,m,x=a=>{var b=e.createBufferSource();b.buffer=a;var d=()=>{q(b);b.removeEventListener("ended",d)};b.addEventListener("ended",d);a=e.createStereoPanner?.();var f=e.createGain(),k=(a?b.connect(a):b).connect(f),h=k.connect;m||(m=e.createGain(),m.gain.value=r,m.connect(e.destination));
h.call(k,m);b.G=f;b.P=a;return b},p=[],t=(a,b=0,d=0)=>{n();if(a instanceof AudioBuffer){var f=x(a);if(!d){for(d=p.length-1;0<=d;d--){var [k,h]=p[d];k===a&&(h.G.gain.value/=2);h.buffer||p.splice(d,1)}p.push([a,f])}b||f.start();return f}},g={},u=()=>{var a=g.h;a&&q(a);a=g.i;g={};if(a){var [b,d,f,k,h]=a,c=t(b,1,1);if(c){c.loop=!d;c.G.gain.value=f;c.playbackRate.value=k;var l=c.P?.pan;l&&(l.value=h);g.j=a;g.h=c;c.start()}else u()}};["click","touchstart","touchend"].forEach(a=>{let b=()=>{n();t(e.createBuffer(1,
2,e.sampleRate),0,1);document.removeEventListener(a,b,!0)};document.addEventListener(a,b,!0)});return{L:async a=>{var b=await fetch(a);if(!b.ok)throw Error(a);a=await b.arrayBuffer();return await (new (self.OfflineAudioContext||self.webkitOfflineAudioContext)(2,2,e?.sampleRate||44100)).decodeAudioData(a)},P:t,BGM:(a,b=0,d=1,f=1,k=1,h=0)=>{n();var c=g.h,l=g.j;if(!c?.buffer||g.g||a!==l[0]||b!=l[1]||k!=l[2]||f!=l[3]||h!=l[4])if(g.i=a?[a,b,k,f,h]:null,!g.g){if(!c?.buffer||!c.G||!d)return u();g.g=!0;var v=
99*d,y=c.G.gain.value/9,w=()=>0>=(c.G.gain.value-=y)||!c.buffer?u():setTimeout(w,v);setTimeout(w,v)}},D:q,get V(){return r},set V(a){r=a;m&&(m.gain.value=a)},get A(){n();return e},VER:"1.0.20230721"}})();
//# sourceMappingURL=va99.min.mjs.map
